<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
             xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="Examples"
             id="definitions">
    <process id="compensateProcess" isExecutable="true">
        <startEvent id="start"></startEvent>
        <sequenceFlow id="seq1" sourceRef="start" targetRef="scope"></sequenceFlow>
        <subProcess id="scope" name="subProcess">
            <startEvent id="startInScope"></startEvent>
            <endEvent id="endInScope"></endEvent>
            <scriptTask id="scripttask2" name="订酒店" scriptFormat="groovy" activiti:autoStoreVariables="false">
                <script><![CDATA[System.out.println("预订酒店");]]></script>
            </scriptTask>
            <boundaryEvent id="boundarycompensation1" name="Compensate" attachedToRef="scripttask2" cancelActivity="true">
                <compensateEventDefinition></compensateEventDefinition>
            </boundaryEvent>
            <sequenceFlow id="flow3" sourceRef="startInScope" targetRef="scripttask2"></sequenceFlow>
            <sequenceFlow id="flow4" sourceRef="scripttask2" targetRef="endInScope"></sequenceFlow>
            <scriptTask id="scripttask3" name="Script Task" isForCompensation="true" scriptFormat="groovy" activiti:autoStoreVariables="false">
                <script><![CDATA[System.out.println("发送确认信息");]]></script>
            </scriptTask>
            <association id="association1" sourceRef="boundarycompensation1" targetRef="scripttask3" associationDirection="None"></association>
        </subProcess>
        <sequenceFlow id="seq4" sourceRef="scope" targetRef="throwCompensate"></sequenceFlow>
        <intermediateThrowEvent id="throwCompensate">
            <compensateEventDefinition activityRef="scope"></compensateEventDefinition>
        </intermediateThrowEvent>
        <endEvent id="end"></endEvent>
        <scriptTask id="scripttask1" name="完成预订" scriptFormat="groovy" activiti:autoStoreVariables="false">
            <script><![CDATA[System.out.println("完成预订");]]></script>
        </scriptTask>
        <sequenceFlow id="flow1" sourceRef="throwCompensate" targetRef="scripttask1"></sequenceFlow>
        <sequenceFlow id="flow2" sourceRef="scripttask1" targetRef="end"></sequenceFlow>
    </process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_compensateProcess">
        <bpmndi:BPMNPlane bpmnElement="compensateProcess" id="BPMNPlane_compensateProcess">
            <bpmndi:BPMNShape bpmnElement="start" id="BPMNShape_start">
                <omgdc:Bounds height="35.0" width="35.0" x="0.0" y="104.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="scope" id="BPMNShape_scope">
                <omgdc:Bounds height="239.0" width="300.0" x="80.0" y="0.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="startInScope" id="BPMNShape_startInScope">
                <omgdc:Bounds height="35.0" width="35.0" x="100.0" y="35.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="endInScope" id="BPMNShape_endInScope">
                <omgdc:Bounds height="35.0" width="35.0" x="330.0" y="35.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="scripttask2" id="BPMNShape_scripttask2">
                <omgdc:Bounds height="55.0" width="105.0" x="180.0" y="25.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="boundarycompensation1" id="BPMNShape_boundarycompensation1">
                <omgdc:Bounds height="30.0" width="30.0" x="260.0" y="65.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="scripttask3" id="BPMNShape_scripttask3">
                <omgdc:Bounds height="55.0" width="105.0" x="180.0" y="150.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="throwCompensate" id="BPMNShape_throwCompensate">
                <omgdc:Bounds height="35.0" width="35.0" x="430.0" y="102.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="end" id="BPMNShape_end">
                <omgdc:Bounds height="35.0" width="35.0" x="660.0" y="104.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="scripttask1" id="BPMNShape_scripttask1">
                <omgdc:Bounds height="55.0" width="105.0" x="520.0" y="92.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge bpmnElement="seq1" id="BPMNEdge_seq1">
                <omgdi:waypoint x="35.0" y="121.0"></omgdi:waypoint>
                <omgdi:waypoint x="42.0" y="119.0"></omgdi:waypoint>
                <omgdi:waypoint x="42.0" y="119.0"></omgdi:waypoint>
                <omgdi:waypoint x="80.0" y="119.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
                <omgdi:waypoint x="135.0" y="52.0"></omgdi:waypoint>
                <omgdi:waypoint x="180.0" y="52.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow4" id="BPMNEdge_flow4">
                <omgdi:waypoint x="285.0" y="52.0"></omgdi:waypoint>
                <omgdi:waypoint x="330.0" y="52.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="association1" id="BPMNEdge_association1">
                <omgdi:waypoint x="275.0" y="95.0"></omgdi:waypoint>
                <omgdi:waypoint x="232.0" y="150.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="seq4" id="BPMNEdge_seq4">
                <omgdi:waypoint x="380.0" y="119.0"></omgdi:waypoint>
                <omgdi:waypoint x="430.0" y="119.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
                <omgdi:waypoint x="465.0" y="119.0"></omgdi:waypoint>
                <omgdi:waypoint x="520.0" y="119.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
                <omgdi:waypoint x="625.0" y="119.0"></omgdi:waypoint>
                <omgdi:waypoint x="660.0" y="121.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>